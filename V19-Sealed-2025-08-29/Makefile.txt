.PHONY: pack sha check

DATE := $(shell date +%Y%m%d)
BUNDLE := V19-Sealed-$(DATE)

pack:
	mkdir -p dist && \
	tar -czf dist/$(BUNDLE).tar.gz \
	  docs/V19 \
	  schemas \
	  configs/env.v19.example \
	  tests/acceptance && \
	sha256sum dist/$(BUNDLE).tar.gz > dist/$(BUNDLE).sha256 && \
	echo "Packed dist/$(BUNDLE).tar.gz"

sha:
	sha256sum -c dist/$(BUNDLE).sha256

check:
	jq empty schemas/*.json
